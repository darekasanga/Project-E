<!doctype html>
<html lang="ja">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>記事ページ | Emperor News</title>
<link rel="stylesheet" href="/assets/blog-shared.css">
<body>
  <header class="site-header">
    <div class="brand">
      <div class="logo">E</div>
      <div>
        <h1>記事ページ</h1>
        <p>スマホ・タブレット・PCの本文ビュー</p>
      </div>
    </div>
    <div class="actions">
      <a class="pill" href="/blog-list.html">一覧へ</a>
      <a class="pill ghost" href="/">トップ</a>
    </div>
  </header>

  <main class="container">
    <section class="hero" id="articleHero">
      <div class="inline-chips" id="articleMeta"></div>
      <h2 id="articleTitle">記事タイトル</h2>
      <p id="articleLead" class="muted">本文の冒頭をここに表示します。</p>
      <div class="actions" id="shareRow"></div>
    </section>

    <section class="grid-2">
      <article class="card" id="articleBody"></article>
      <aside class="card">
        <h3>デバイス別の読みやすさ</h3>
        <div class="device-grid">
          <div class="device-card">
            <strong>スマホ</strong>
            <span class="mobile-hint">本文を1カラムで表示し、ボタンを大きめに。</span>
          </div>
          <div class="device-card">
            <strong>タブレット</strong>
            <span class="tablet-hint">本文幅を少し広げ、サイド余白を確保。</span>
          </div>
          <div class="device-card">
            <strong>PC</strong>
            <span class="pc-hint">最大1200pxのカラムで視線移動を最小化。</span>
          </div>
        </div>
      </aside>
    </section>
  </main>

<script src="/assets/lightbox.js"></script>
<script src="/assets/blog-data.js"></script>
<script>
  const params = new URLSearchParams(location.search);
  const articleIdx = parseInt(params.get("id"), 10) || 0;
  const { article } = BlogData.findArticle(articleIdx);

  function renderArticle() {
    const hero = document.getElementById("articleHero");
    const titleEl = document.getElementById("articleTitle");
    const leadEl = document.getElementById("articleLead");
    const bodyEl = document.getElementById("articleBody");
    const shareRow = document.getElementById("shareRow");
    const meta = document.getElementById("articleMeta");

    titleEl.textContent = article.title || "無題の記事";
    leadEl.textContent = article.body?.slice(0, 120) || "本文を入力してください";

    meta.innerHTML = `
      <span class="badge">ID ${articleIdx}</span>
      <span class="badge">レスポンシブ本文</span>
      ${(article.tags || []).map(tag => `<a class=\"tag\" href=\"/tag.html?tag=${encodeURIComponent(tag)}\">#${tag}</a>`).join(""
      )}
    `;

    if (article.image) {
      const img = document.createElement("img");
      img.src = article.image;
      img.alt = article.title;
      img.className = "hero-img";
      hero.appendChild(img);
      Lightbox.enhanceImages(hero);
    }

    bodyEl.classList.add("article-body");
    bodyEl.innerHTML = (article.body || "本文がありません").split(/\n+/).map(p => `<p>${p}</p>`).join("");

    const articleUrl = `${location.origin}/blog-article.html?id=${articleIdx}`;
    const shareUrl = BlogData.buildOfficialLineShare(articleUrl);
    shareRow.innerHTML = `
      <a class="share line" href="${shareUrl}" target="_blank" rel="noreferrer">LINEで共有</a>
      <a class="share" href="${articleUrl}" target="_blank">リンクをコピー</a>
    `;
  }

  document.addEventListener("DOMContentLoaded", renderArticle);
</script>
</body>
</html>
