<!doctype html>
<html lang="ja">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Emperor News | Project-E</title>
<link rel="stylesheet" href="/assets/base.css">
<body>
  <header class="site-header">
    <div class="brand">
      <div class="logo">E</div>
      <div>
        <h1>Emperor News</h1>
        <p>ã‚¹ãƒãƒ› / ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ / PC å…¨é¢åˆ·æ–°</p>
      </div>
    </div>
    <div class="actions">
      <a class="pill primary" href="/blog-list.html">ä¸€è¦§ãƒ“ãƒ¥ãƒ¼</a>
      <a class="pill ghost" href="/admin.html">ç®¡ç†ç”»é¢</a>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="inline-chips">
        <div class="badge" id="heroBadge">New UI</div>
        <div class="badge" id="heroMeta">ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–æ›´æ–°</div>
      </div>
      <h2 id="heroTitle">å…¨ãƒšãƒ¼ã‚¸ã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã§ä½œã‚Šç›´ã—ã¾ã—ãŸ</h2>
      <p id="heroBody">ã‚¹ãƒãƒ›ã¯ç‰‡æ‰‹ã§èª­ã¿ã‚„ã™ãã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã¯æ¨ªå¹…ã‚’æ´»ã‹ã—ã€PCã¯ã‚µã‚¤ãƒ‰æƒ…å ±ä»˜ãã§ä¸€è¦§æ€§ã‚’é«˜ã‚ã¾ã—ãŸã€‚ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ã§å…±é€šã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚</p>
      <div class="tag-row" id="heroTags"></div>
      <div class="actions" id="heroActions">
        <a class="button primary" href="/blog-list.html">ãƒ–ãƒ­ã‚°ä¸€è¦§ãƒ“ãƒ¥ãƒ¼</a>
        <a class="button ghost" href="/blog-article.html">å˜ä½“è¨˜äº‹</a>
        <a class="button ghost" href="/blog-edit.html">è¨˜äº‹ç·¨é›†</a>
      </div>
    </section>

    <section class="section">
      <div class="section-title">
        <h2>æ³¨ç›®è¨˜äº‹</h2>
        <span class="muted">æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ãƒã‚§ãƒƒã‚¯</span>
      </div>
      <div class="scroll-row" id="featuredRow"></div>
    </section>

    <section class="section">
      <div class="section-title">
        <h2>æœ€æ–°è¨˜äº‹</h2>
        <span class="muted">ç¸¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ã¾ã¨ã‚èª­ã¿</span>
      </div>
      <div class="list-shell latest-list">
        <div class="list" id="latestList"></div>
      </div>
    </section>

    <section class="section">
      <div class="section-title">
        <h2>ãƒšãƒ¼ã‚¸ãƒªãƒ³ã‚¯</h2>
        <span class="muted">ã™ã¹ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ</span>
      </div>
      <div class="card-grid">
        <article class="card">
          <h3>ğŸ¨ Draw Board</h3>
          <p>æ–°ã—ã„ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒã¨ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒœã‚¿ãƒ³ã§æç”»ãƒ„ãƒ¼ãƒ«ã‚‚åˆ·æ–°ã€‚æŒ‡ã§ã‚‚ãƒã‚¦ã‚¹ã§ã‚‚å¿«é©ã§ã™ã€‚</p>
          <a class="button primary" href="/draw.html">é–‹ã</a>
        </article>
        <article class="card">
          <h3>ğŸ—‚ï¸ ç®¡ç†ãƒ“ãƒ¥ãƒ¼</h3>
          <p>ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€èªè¨¼ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚’æ›´æ–°ã—ã€ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå°ç·šã‚‚æ•´ç†ã—ã¾ã—ãŸã€‚</p>
          <a class="button ghost" href="/admin.html">é–‹ã</a>
        </article>
        <article class="card">
          <h3>ğŸ“‘ Blog (ä¸€è¦§)</h3>
          <p>ã‚¹ãƒãƒ›1ã‚«ãƒ©ãƒ ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ2ã‚«ãƒ©ãƒ ã€PC2ã‚«ãƒ©ãƒ ï¼‹ã‚µã‚¤ãƒ‰ãƒãƒ¼ã€‚æ–°ã—ã„çµ±è¨ˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆä»˜ãã€‚</p>
          <a class="button ghost" href="/blog-list.html">é–‹ã</a>
        </article>
        <article class="card">
          <h3>âœï¸ Blog ç·¨é›†</h3>
          <p>ãƒ•ã‚©ãƒ¼ãƒ ã¨ãƒªã‚¹ãƒˆã‚’æ•´ç†ã—ã€ç·¨é›†çŠ¶æ…‹ã‚„ã‚¿ã‚°è¡¨ç¤ºã‚’å¼·èª¿ã€‚ä¿å­˜å¾Œã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚‚æ”¹å–„ã€‚</p>
          <a class="button ghost" href="/blog-edit.html">é–‹ã</a>
        </article>
        <article class="card">
          <h3>ğŸ’¬ Chat TOC Maker</h3>
          <p>ãƒãƒ£ãƒƒãƒˆã®ç›®æ¬¡ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã‚’æ–°ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«åˆ·æ–°ã€‚ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã§ã‚·ãƒ³ãƒ—ãƒ«ãªå…¥åŠ›ã«ã€‚</p>
          <a class="button ghost" href="/chat-toc.html">é–‹ã</a>
        </article>
        <article class="card">
          <h3>ğŸ“° è¨˜äº‹ãƒ“ãƒ¥ãƒ¼</h3>
          <p>å€‹åˆ¥è¨˜äº‹ãƒšãƒ¼ã‚¸ã¯æœ¬æ–‡ã¨ã‚¿ã‚°ã€å…±æœ‰ãƒœã‚¿ãƒ³ã‚’å†é…ç½®ã€‚èª­ã¿ã‚„ã™ã•ã‚’å„ªå…ˆã—ãŸæ–°ãƒ‡ã‚¶ã‚¤ãƒ³ã§ã™ã€‚</p>
          <a class="button ghost" href="/blog-article.html">é–‹ã</a>
        </article>
      </div>
    </section>
  </main>

  <footer>
    <div class="section-title">
      <span>Project-E / Emperor News</span>
      <span class="tiny">ã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»PCã§åŒã˜ä½“é¨“ã‚’å±Šã‘ã¾ã™ã€‚</span>
    </div>
  </footer>
  <script src="/assets/lightbox.js"></script>
  <script src="/assets/blog-data.js"></script>
  <script>
    const latestList = document.getElementById("latestList");
    const heroTitle = document.getElementById("heroTitle");
    const heroBody = document.getElementById("heroBody");
    const heroTags = document.getElementById("heroTags");
    const heroActions = document.getElementById("heroActions");
    const heroBadge = document.getElementById("heroBadge");
    const heroMeta = document.getElementById("heroMeta");
    const featuredRow = document.getElementById("featuredRow");

    const heroFallback = {
      title: "å…¨ãƒšãƒ¼ã‚¸ã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã§ä½œã‚Šç›´ã—ã¾ã—ãŸ",
      body: "ã‚¹ãƒãƒ›ã¯ç‰‡æ‰‹ã§èª­ã¿ã‚„ã™ãã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã¯æ¨ªå¹…ã‚’æ´»ã‹ã—ã€PCã¯ã‚µã‚¤ãƒ‰æƒ…å ±ä»˜ãã§ä¸€è¦§æ€§ã‚’é«˜ã‚ã¾ã—ãŸã€‚ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ã§å…±é€šã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚",
      tags: ["ã‚¹ãƒãƒ›å¯¾å¿œ", "ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ", "PC"]
    };

    function formatRelative(index) {
      const base = Date.now() - index * 3_600_000 * 3;
      const diffHours = Math.max(1, Math.round((Date.now() - base) / 3_600_000));
      if (diffHours < 24) return `${diffHours}æ™‚é–“å‰`;
      const days = Math.round(diffHours / 24);
      return `${days}æ—¥å‰`;
    }

    function renderLatestList() {
      const latest = BlogData.getHomeLatestArticles();
      const articles = latest.list;
      latestList.innerHTML = "";

      if (!articles.length) {
        latestList.innerHTML = '<p class="muted">ã¾ã è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ç®¡ç†ç”»é¢ã‹ã‚‰è¿½åŠ ã—ã¦ãã ã•ã„ã€‚</p>';
        return;
      }

      articles.forEach(({ article, idx }, orderIdx) => {
        const isLatest = orderIdx === 0;
        const primaryTag = article.tags?.[0];
        const detailLink = `/blog-article.html?id=${idx}`;
        const card = document.createElement("article");
        card.className = "list-card latest-card";
        card.innerHTML = `
          <div class="latest-top">
            <h3>${article.title || "ç„¡é¡Œã®è¨˜äº‹"}</h3>
            ${isLatest ? '<span class="badge">NEW</span>' : ""}
          </div>
          <p>${article.body || "æœ¬æ–‡ãŒã‚ã‚Šã¾ã›ã‚“"}</p>
          <div class="latest-meta">
            <span>${formatRelative(idx)}</span>
            <span>${primaryTag ? `#${primaryTag}` : "ã‚¿ã‚°ãªã—"}</span>
            <span><a class="tag" href="${detailLink}">è¨˜äº‹ã‚’èª­ã‚€</a></span>
          </div>
        `;
        latestList.appendChild(card);
      });
    }

    function renderFeaturedRow() {
      const featured = BlogData.getHomeFeaturedArticles();
      const articles = featured.list;
      featuredRow.innerHTML = "";

      if (!articles.length) {
        featuredRow.innerHTML = '<p class="muted">è¨˜äº‹ã‚’è¿½åŠ ã—ã¦æ³¨ç›®æ ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚</p>';
        return;
      }

      const gradients = ["", "gradient-blue", "gradient-gold", "gradient-purple"];

      articles.forEach(({ article, idx }, orderIdx) => {
        const card = document.createElement("article");
        const gradient = gradients[orderIdx % gradients.length];
        card.className = `featured-card ${gradient}`.trim();
        const cover = article.image
          ? `<div class="featured-thumb" aria-hidden="true" style="background-image: url(${article.image}); background-size: cover; background-position: center;"></div>`
          : '<div class="featured-thumb fallback" aria-hidden="true">NO IMAGE</div>';
        const primaryTag = article.tags?.[0];
        const secondaryTag = article.tags?.[1];
        const articleUrl = `/blog-article.html?id=${idx}`;
        card.innerHTML = `
          ${cover}
          <div class="featured-pill">ID ${idx}</div>
          <h3>${article.title || "ç„¡é¡Œã®è¨˜äº‹"}</h3>
          <p>${article.body || "æœ¬æ–‡ãŒã‚ã‚Šã¾ã›ã‚“"}</p>
          <div class="featured-meta">
            <span>${primaryTag ? `#${primaryTag}` : "ã‚¿ã‚°ãªã—"}</span>
            <span>${secondaryTag ? `#${secondaryTag}` : "é¸æŠé † ${orderIdx + 1}"}</span>
          </div>
          <div class="actions" style="margin-top:8px;">
            <a class="button ghost" href="${articleUrl}">è¨˜äº‹ã‚’èª­ã‚€</a>
          </div>
        `;
        featuredRow.appendChild(card);
      });
    }

    function renderHeroFromArticle() {
      const { article, idx } = BlogData.getHeroArticle();
      const articles = BlogData.loadArticles();
      heroTags.innerHTML = "";
      heroActions.innerHTML = "";

      if (!articles.length || !article) {
        heroBadge.textContent = "New UI";
        heroMeta.textContent = "ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–æ›´æ–°";
        heroTitle.textContent = heroFallback.title;
        heroBody.textContent = heroFallback.body;
        heroFallback.tags.forEach((tag) => {
          const chip = document.createElement("span");
          chip.className = "badge";
          chip.textContent = tag;
          heroTags.appendChild(chip);
        });
        heroActions.innerHTML = `
          <a class="button primary" href="/blog-list.html">ãƒ–ãƒ­ã‚°ä¸€è¦§ãƒ“ãƒ¥ãƒ¼</a>
          <a class="button ghost" href="/blog-article.html">å˜ä½“è¨˜äº‹</a>
          <a class="button ghost" href="/blog-edit.html">è¨˜äº‹ç·¨é›†</a>
        `;
        return;
      }

      heroBadge.textContent = "ãƒˆãƒƒãƒ—ãŠã™ã™ã‚";
      heroMeta.textContent = `ID ${idx}`;
      heroTitle.textContent = article.title || "ç„¡é¡Œã®è¨˜äº‹";
      heroBody.textContent = article.body || "æœ¬æ–‡ãŒã‚ã‚Šã¾ã›ã‚“";

      if (article.tags?.length) {
        article.tags.forEach((tag) => {
          const link = document.createElement("a");
          link.className = "tag";
          link.href = `/tag.html?tag=${encodeURIComponent(tag)}`;
          link.textContent = `#${tag}`;
          heroTags.appendChild(link);
        });
      } else {
        heroTags.innerHTML = '<span class="badge">#untagged</span>';
      }

      const articleUrl = `${location.origin}/blog-article.html?id=${idx}`;
      const shareUrl = BlogData.buildOfficialLineShare(articleUrl);
      heroActions.innerHTML = `
        <a class="button primary" href="/blog-list.html">ãƒ–ãƒ­ã‚°ä¸€è¦§ãƒ“ãƒ¥ãƒ¼</a>
        <a class="button ghost" href="${articleUrl}">ã“ã®è¨˜äº‹ã‚’èª­ã‚€</a>
        <a class="button ghost" href="${shareUrl}" target="_blank" rel="noreferrer">LINEã§å…±æœ‰</a>
      `;
    }

    document.addEventListener("DOMContentLoaded", () => {
      renderHeroFromArticle();
      renderLatestList();
      renderFeaturedRow();
    });
  </script>
</body>
</html>
